<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>General Primer</title>
</head><body>SID History is an attribute that supports migration scenarios. Every user account has an associated Security IDentifier (SID) which is used to track the security principal and the access the account has when connecting to resources. SID History enables access for another account to effectively be cloned to another. This is extremely useful to ensure users retain access when moved (migrated) from one domain to another. Since the user's SID changes when the new &nbsp;account si created, the old SID needs to map to the new one. When a user in Domain A is migrated to Domain B, a new user account is created in Domain B and Domain A user's SID is added to Domain B's user account's SID History attribute. This ensure that Domain B user can still access resources in Domain A.<br/>
<br/>
The interesting part of this is that SID History works for SIDs in the same domain as it does across domains in the same forest, which means that a regular user acccount in Domain A can contain Domain A &nbsp;SIDs and if the Domain A SIDs are for privileged &nbsp;accounts or groups, a regular user account can be granted Domain Admin rights without being &nbsp;a member of Domain Admins.<br/>
<br/>
Note: A regular user in a domain can contain the Enterprise Admin SID in its SID History from another domain in the Active Directory forest, thus "elevating" access for the user account to effective Domain Admin in all domains in the forest. If you have a forest trust <i>without</i>&nbsp;SID Filtering enabled (also called Quarantine), it's possible to inject a SID from another forest and it will be added to the user token when authenticated and used for access evaluations.<br/>
<br/>
Mimikatz enables SID History injection to any user account (requires Domain Admin or equivalent rights). </body></html>